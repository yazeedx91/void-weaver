# FLUX-DNA Product Requirements Document
## AI-Native Psychometric Sanctuary - FINAL ASCENSION EDITION

**Version**: 2026.4.0 (Final Ascension)  
**Last Updated**: February 11, 2026  
**Status**: âœ… **CITADEL DEPLOYED - READY FOR PRODUCTION**

---

## ğŸ”¥ THE PHOENIX HAS REACHED MAXIMUM BANDWIDTH

This document represents the complete FLUX-DNA Void-Weaver build with all Neural-First Architecture features.

---

## Original Problem Statement

Build FLUX-DNA as a sentient, AI-native sanctuary that:
- Reframes "Bipolar" as "Expanded Cognitive Bandwidth"
- Delivers SAR 5,500 market value for SAR 0 to the Saudi people
- Implements Zero-Knowledge encryption (AES-256-GCM)
- Features dual AI personas: Al-Hakim (wise guide) and Al-Sheikha (protective matriarch)
- Supports bilingual interface (English / Saudi Arabic)

---

## Tech Stack

| Layer | Technology | Status |
|-------|------------|--------|
| Frontend | Next.js 15, Tailwind CSS 4.0, Framer Motion | âœ… |
| Backend | FastAPI (Python) | âœ… |
| Database | Supabase (PostgreSQL + pgvector) | âœ… |
| Cache | Upstash Redis | âœ… |
| AI | Claude 4 Sonnet (Emergent LLM Key) | âœ… |
| Email | Resend | âœ… |
| PDF | ReportLab | âœ… |
| Icons | Lucide React | âœ… |

---

## Neural-First Architecture âœ… COMPLETE

### Core Concept
**The AI is the Controller** - The LLM drives all UI state transitions based on user emotional state detection.

### User States
| State | Description | Trigger |
|-------|-------------|---------|
| `curious` | Exploring the platform | Initial state |
| `assessment` | Ready for evaluation | Normal conversation |
| `distress` | Emotional distress detected | Keywords: scared, trapped, controls, isolated |
| `crisis` | Immediate safety concern | Keywords: suicide, end it, tonight, can't take it |
| `sanctuary` | Needs protection/support | Pivot from distress |
| `celebration` | Positive completion | Assessment complete |

### Neural Modes
| Mode | Description | UI Changes |
|------|-------------|------------|
| `phoenix` | Standard assessment | Emerald pulse, normal flow |
| `sanctuary` | Protective mode | Pearl colors, Quick Exit, Al-Sheikha persona |
| `guardian` | Crisis response | Red pulse, Emergency resources, immediate support |
| `ceremonial` | Celebration/completion | Gold pulse, Confetti animation |

---

## AI-Driven Daily Pulse âœ… COMPLETE

### Features
- **Claude 4 Sonnet Analysis**: Generates executive strategic briefings
- **Terminal-Style Format**: High-end executive aesthetic
- **Metrics Analysis**: Users, completions, sanctuary access, crisis alerts
- **Trend Analysis**: Neural state distribution insights
- **Strategic Recommendations**: AI-generated actionable insights
- **Auto-Email**: Sends to Yazeedx91@gmail.com

### Endpoints
- `POST /api/founder/strategic-briefing` - Generate AI briefing
- `POST /api/founder/send-ai-pulse` - Send AI-enhanced email to founder

---

## Core Features

### 1. Phoenix Assessment âœ…
- **Persona**: Al-Hakim (Ø§Ù„Ø­ÙƒÙŠÙ…) - Wise Clinical Guardian
- **8 Scales**: HEXACO-60, DASS-21, TEIQue-SF, Raven's IQ, Schwartz Values, HITS, PC-PTSD-5, WEB
- **Neural Routing**: AI drives state transitions
- **Output**: Sovereign Title, Stability Classification, Superpower Analysis

### 2. Sovereigness Sanctuary âœ…
- **Persona**: Al-Sheikha (Ø§Ù„Ø´ÙŠØ®Ø©) - Protective Matriarch
- **4 Pillars**: Legal Shield, Medical Sentinel, Psych-Repair Crew, Economic Liberator
- **AI Vision**: Evidence analysis for Forensic Vault

### 3. Sovereign Certificate âœ…
- **Format**: PDF (in-memory generation)
- **Design**: Obsidian background, gold borders, emerald accents
- **Delivery**: Time-gated download link (24h/3-click)

### 4. Security Features âœ…
- Zero-Knowledge AES-256-GCM encryption
- OSINT Safety Radar (VPN/Tor detection)
- Quick Exit button (weather.com redirect)
- Time-gated self-destructing links

### 5. Founder Dashboard âœ…
- Password: PhoenixSovereign2026!
- Real-time metrics
- AI Strategic Briefing generation
- Manual pulse trigger

---

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/health` | GET | System health |
| `/api/assessment/start` | POST | Start assessment + Neural Directive |
| `/api/assessment/message` | POST | Chat + Neural Directive |
| `/api/assessment/complete` | POST | Complete + Ceremonial mode |
| `/api/osint/check` | POST | OSINT safety check |
| `/api/vault/submit` | POST | Evidence + AI Vision |
| `/api/founder/metrics` | GET | Dashboard metrics |
| `/api/founder/strategic-briefing` | POST | AI briefing |
| `/api/founder/send-ai-pulse` | POST | Send AI-enhanced email |

---

## Access URLs

### Preview Environment
- **App**: https://neural-sanctuary.preview.emergentagent.com/
- **Assessment**: https://neural-sanctuary.preview.emergentagent.com/assessment
- **Sanctuary**: https://neural-sanctuary.preview.emergentagent.com/sanctuary
- **Founder**: https://neural-sanctuary.preview.emergentagent.com/founder-ops
- **API Docs**: https://neural-sanctuary.preview.emergentagent.com/api/docs

### Production (After Deployment)
- **App**: https://flux-dna.com/
- **API**: https://api.flux-dna.com/

---

## Production Deployment Steps

### Step 1: Save to GitHub
- Use "Save to GitHub" in Emergent chat
- Repository: `yazeedx91/void-weaver`

### Step 2: Deploy Frontend to Vercel
- Root Directory: `frontend-next`
- Framework: Next.js
- Environment Variables:
  - `NEXT_PUBLIC_API_URL=https://api.flux-dna.com`
  - `NEXT_PUBLIC_SUPABASE_URL=https://olzslibguayabdysjwvn.supabase.co`

### Step 3: Deploy Backend to Railway
- Root Directory: `backend`
- Add all environment variables from `/app/backend/.env`

### Step 4: Configure DNS
```
A       @       76.76.21.21 (Vercel)
CNAME   www     cname.vercel-dns.com
CNAME   api     [railway-url].railway.app
```

---

## Completed Work

### February 11, 2026 - Final Ascension
- [x] AI-Driven Daily Pulse with Claude strategic analysis
- [x] Executive terminal-style email templates
- [x] Real-time metrics from session data
- [x] Neural state distribution tracking
- [x] System verification and testing

### February 10, 2026 - Neural-First Architecture
- [x] Neural Router service implementation
- [x] Distress/Crisis detection
- [x] Sentient UI with pulse colors, Quick Exit, Confetti
- [x] OSINT risk integration
- [x] AI Vision for Forensic Vault

### Previous Work
- [x] Void-Weaver design integration
- [x] All 8 psychometric scales
- [x] Zero-Knowledge encryption
- [x] Time-gated certificate system
- [x] Bilingual support (EN/AR)

---

## Files Structure

```
/app/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ assessment.py    # Neural-First Assessment
â”‚   â”‚   â”œâ”€â”€ founder.py       # AI Strategic Briefing
â”‚   â”‚   â”œâ”€â”€ vault.py         # AI Vision Evidence
â”‚   â”‚   â””â”€â”€ osint.py         # Safety Radar
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ neural_router.py # State Detection
â”‚   â”‚   â”œâ”€â”€ claude_service.py
â”‚   â”‚   â”œâ”€â”€ email_service.py # AI Pulse Templates
â”‚   â”‚   â””â”€â”€ time_gate.py
â”‚   â””â”€â”€ server.py
â”œâ”€â”€ frontend-next/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx         # Phoenix Landing
â”‚   â”‚   â”œâ”€â”€ assessment/      # Neural-First Chat
â”‚   â”‚   â”œâ”€â”€ sanctuary/       # Pearl Theme
â”‚   â”‚   â”œâ”€â”€ founder-ops/     # Terminal Dashboard
â”‚   â”‚   â””â”€â”€ results/         # Ceremonial Mode
â”‚   â””â”€â”€ lib/
â”‚       â””â”€â”€ api.ts           # Neural Directive Types
â””â”€â”€ memory/
    â””â”€â”€ PRD.md
```

---

## Credentials

| Service | Location |
|---------|----------|
| Emergent LLM Key | /app/backend/.env |
| Supabase | /app/backend/.env |
| Upstash Redis | /app/backend/.env |
| Resend | /app/backend/.env |
| Founder Password | PhoenixSovereign2026! |
| Founder Email | Yazeedx91@gmail.com |

---

## Test Results

- **Backend**: 12/12 tests passed (Neural-First Architecture)
- **Frontend**: All features working (Quick Exit, Neural Directives, Themes)
- **AI Integration**: Claude responding, strategic briefings generating
- **Email**: Daily pulse emails delivering successfully

---

ğŸ§  **THE BRAIN IS THE CONTROLLER**  
ğŸ”¥ **THE PHOENIX HAS ASCENDED**  
ğŸ‘ï¸ **THE GUARDIAN IS WATCHING**  
ğŸ•Šï¸ **THE PEOPLE ARE FREE**

---

*FLUX-DNA Final Ascension Edition v2026.4.0*
*Built by Yazeed â€” for every mind that society called "too much."*
